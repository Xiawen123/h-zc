<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" >
<head>
	<th:block th:include="include :: header('新增资产报废')" />
	<script th:src="@{/ajax/libs/laydate/laydate.js}"></script>
</head>
<body class="white-bg">
<div class="wrapper wrapper-content animated fadeInRight ibox-content">
	<form class="form-horizontal m" id="form-change-add">
		<div class="form-group">
			<label class="col-sm-3 control-label">资产id：</label>
			<div class="col-sm-8">
				<input name="id" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">资产名称：</label>
			<div class="col-sm-8">
				<input name="name" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">资产编号：</label>
			<div class="col-sm-8">
				<input name="assetNum" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">资产品牌：</label>
			<div class="col-sm-8">
				<input name="brand" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">资产规格：</label>
			<div class="col-sm-8">
				<input name="assetSpecification" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">数量：</label>
			<div class="col-sm-8">
				<input name="number" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">资产类型：</label>
			<div class="col-sm-8">
				<input name="type" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">资产类型：</label>
			<div class="col-sm-8">
				<select name="type" class="form-control m-b" th:with="type=${@dict.getType('zc_department')}">
					<option value="">所有</option>
					<option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}"></option>
				</select>
				<span class="help-block m-b-none"><i class="fa fa-info-circle"></i> 代码生成请选择字典属性</span>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">单位：</label>
			<div class="col-sm-8">
				<select name="units" class="form-control m-b" th:with="type=${@dict.getType('zc_department')}">
					<option value="">所有</option>
					<option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}"></option>
				</select>
				<span class="help-block m-b-none"><i class="fa fa-info-circle"></i> 代码生成请选择字典属性</span>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">供货商：</label>
			<div class="col-sm-8">
				<input name="supplier" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">图片：</label>
			<div class="col-sm-8">
				<input name="picture" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">资产原值：</label>
			<div class="col-sm-8">
				<input name="price" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">供货商：</label>
			<div class="col-sm-8">
				<select name="supplier" class="form-control m-b" th:with="type=${@dict.getType('zc_department')}">
					<option value="">所有</option>
					<option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}"></option>
				</select>
				<span class="help-block m-b-none"><i class="fa fa-info-circle"></i> 代码生成请选择字典属性</span>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">申请部门：</label>
			<div class="col-sm-8">
				<select name="extend1" class="form-control m-b" th:with="type=${@dict.getType('zc_department')}">
					<option value="">所有</option>
					<option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}"></option>
				</select>
				<span class="help-block m-b-none"><i class="fa fa-info-circle"></i> 代码生成请选择字典属性</span>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">申请人员：</label>
			<div class="col-sm-8">
				<input name="extend2" class="form-control" type="text">
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">报废时间：</label>
			<div class="col-sm-8">
				<input name="discardTime" class="form-control" type="text" id="discardTime">
			</div>
		</div>
		<button type="button" class="btn btn-primary" onclick="add()">添加</button>
		<button type="button" class="btn btn-danger" onclick="del(this)">删除</button>
	</form>
</div>
<th:block th:include="include :: footer" />
<script type="text/javascript">
    var prefix = ctx + "property/discard"
    $("#form-change-add").validate({
        focusCleanup: true
    });

    $(function(){
        //时间选择器
        laydate.render({
            elem: '#discardTime',
            range: true,
            trigger: 'click'
        });
    });

    function submitHandler() {
        if ($.validate.form()) {
            $.operate.save(prefix + "/add", $('#form-change-add').serialize());
        }
    }

    function add() {
        var options = {
            url: prefix + "/list",
            createUrl: prefix + "/add",
            updateUrl: prefix + "/edit/{id}",
            removeUrl: prefix + "/remove",
            exportUrl: prefix + "/export",
            modalName: "资产报废",
            columns: [{
                checkbox: true
            },
                {
                    field : 'id',
                    title : '资产ID',
                    visible: false
                },
                {
                    field : 'discardTime',
                    title : '报废时间',

                },
                {
                    field : 'name',
                    title : '资产名称'
                },
                {
                    field : 'type',
                    title : '资产分类',
                    align: 'center',
                    formatter: function(value, row, index) {
                        return $.table.selectDictLabel(types, value);
                    }
                },
                {
                    field : 'brand',
                    title : '品牌'
                },
                {
                    field : 'assetSpecification',
                    title : '资产规格'
                },
                {
                    field : 'number',
                    title : '数量'
                },
                {
                    field : 'units',
                    title : '单位',
                    align: 'center',
                    formatter: function(value, row, index) {
                        return $.table.selectDictLabel(unit, value);
                    }
                },
                {
                    field : 'extend1',
                    title : '申报部门',
                    align: 'center',
                    formatter: function(value, row, index) {
                        return $.table.selectDictLabel(datas, value);
                    }
                },
                {
                    field : 'extend2',
                    title : '申报人'
                },
                {
                    title: '操作',
                    align: 'center',
                    formatter: function(value, row, index) {
                        var actions = [];
                        actions.push('<a class="btn btn-success btn-xs ' + editFlag + '" href="javascript:void(0)" onclick="$.operate.edit(\'' + row.id + '\')"><i class="fa fa-edit"></i>编辑</a> ');
                        actions.push('<a class="btn btn-danger btn-xs ' + removeFlag + '" href="javascript:void(0)" onclick="$.operate.remove(\'' + row.id + '\')"><i class="fa fa-remove"></i>删除</a>');
                        return actions.join('');
                    }
                }]
        };
        $.table.init(options);
    }

    function del(data) {
        /*data.parentNode.parentNode.remove();*/
    }

    function submitHandler() {
        if ($.validate.form()) {
            addMajor();
        }
    }

</script>
</body>
</html>